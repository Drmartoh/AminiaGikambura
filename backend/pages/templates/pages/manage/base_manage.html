{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Manage{% endblock %} – AGCBO</title>
  {% if site_settings and site_settings.favicon %}
  <link rel="icon" href="{{ site_settings.favicon.url }}">
  <link rel="shortcut icon" href="{{ site_settings.favicon.url }}">
  {% endif %}
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: { DEFAULT: '#0d4f3c', light: '#0f6b52', dark: '#0a3d2e' },
            admin: {
              side: '#0f172a',
              sideHover: '#1e293b',
              accent: '#22c55e',
              card: '#f8fafc',
            },
          },
          fontFamily: { sans: ['Plus Jakarta Sans', 'Inter', 'system-ui', 'sans-serif'] },
        },
      },
    };
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Plus Jakarta Sans', system-ui, sans-serif; }
    .sidebar-link.active { background: rgba(34, 197, 94, 0.15); color: #22c55e; border-left: 3px solid #22c55e; }
    .sidebar-link:hover:not(.active) { background: #1e293b; color: #e2e8f0; }
    .stat-card { transition: transform 0.2s, box-shadow 0.2s; }
    .stat-card:hover { transform: translateY(-2px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.08); }
    .btn-manage { background: linear-gradient(135deg, #0d4f3c 0%, #0f6b52 100%); color: white; font-weight:600; padding: 0.6rem 1.2rem; border-radius: 0.75rem; transition: all 0.2s; }
    .btn-manage:hover { filter: brightness(1.1); box-shadow: 0 4px 14px rgba(13,79,60,0.4); }
    .input { width: 100%; padding: 0.6rem 0.75rem; border: 1px solid #e2e8f0; border-radius: 0.5rem; transition: border-color 0.2s; }
    .input:focus { outline: none; border-color: #0d4f3c; box-shadow: 0 0 0 3px rgba(13,79,60,0.1); }
    .admin-sidebar { transform: translateX(-100%); transition: transform 0.25s ease-out; }
    .admin-sidebar.open { transform: translateX(0); }
    @media (min-width: 1024px) { .admin-sidebar { transform: translateX(0); } }
    .admin-overlay { transition: opacity 0.2s; }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-slate-100 flex">
  <!-- Mobile overlay (tap to close sidebar) -->
  <div id="admin-sidebar-overlay" class="admin-overlay fixed inset-0 bg-black/50 z-30 opacity-0 pointer-events-none lg:pointer-events-none lg:opacity-0" aria-hidden="true"></div>

  <!-- Sidebar: on mobile hidden by default, scrollable; on lg always visible -->
  <aside id="admin-sidebar" class="admin-sidebar fixed left-0 top-0 z-40 w-64 h-screen max-h-screen bg-admin-side text-slate-200 flex flex-col shadow-xl lg:shadow-none">
    <div class="flex-none p-5 border-b border-slate-700/50 flex items-center justify-between">
      <a href="{% url 'manage:dashboard' %}" class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-primary-light flex items-center justify-center text-white font-bold text-lg">A</div>
        <div>
          <span class="font-bold text-white block">AGCBO</span>
          <span class="text-xs text-slate-400">Manage</span>
        </div>
      </a>
      <button type="button" id="admin-sidebar-close" class="lg:hidden p-2 -mr-2 text-slate-400 hover:text-white rounded-lg" aria-label="Close menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
    </div>
    <nav class="flex-1 min-h-0 py-4 px-3 space-y-0.5 overflow-y-auto overflow-x-hidden">
      <a href="{% url 'manage:dashboard' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg>
        Dashboard
      </a>
      <a href="{% url 'manage:members' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'members' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
        Members
      </a>
      <a href="{% url 'manage:donors' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'donors' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Donors
      </a>
      <a href="{% url 'manage:county_officials' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'county_officials' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
        County Officials
      </a>
      <a href="{% url 'manage:users_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'users' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/></svg>
        Users
      </a>
      <a href="{% url 'manage:projects_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'project' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
        Projects
      </a>
      <a href="{% url 'manage:events_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'event' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
        Events
      </a>
      <a href="{% url 'manage:gallery_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'gallery' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
        Gallery
      </a>
      <a href="{% url 'manage:sport_programs_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'sport_program' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Programs
      </a>
      <a href="{% url 'manage:teams_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2 pl-8 rounded-lg text-sm {% if 'team' in request.resolver_match.url_name %}active{% endif %}">
        Teams
      </a>
      <a href="{% url 'manage:about_edit' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'about_edit' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        About
      </a>
      <a href="{% url 'manage:officials_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'official' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Officials
      </a>
      <a href="{% url 'manage:youth_jobs_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'youth_job' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
        Youth Jobs
      </a>
      <a href="{% url 'manage:section_styles_list' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if 'section_style' in request.resolver_match.url_name or 'section_slide' in request.resolver_match.url_name %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1h-6a1 1 0 01-1-1v-6z"/></svg>
        Section backgrounds
      </a>
      <a href="{% url 'manage:settings' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'settings' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/></svg>
        Site settings
      </a>
      <a href="{% url 'manage:messages' %}" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm {% if request.resolver_match.url_name == 'messages' %}active{% endif %}">
        <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
        Messages
      </a>
    </nav>
    <div class="flex-none p-3 border-t border-slate-700/50">
      <a href="{% url 'pages:home' %}" class="flex items-center gap-2 px-3 py-2 text-sm text-slate-400 hover:text-white rounded-lg">View site →</a>
      <a href="{% url 'pages:logout' %}" class="flex items-center gap-2 px-3 py-2 text-sm text-slate-400 hover:text-red-400 rounded-lg">Log out</a>
    </div>
  </aside>

  <!-- Main content -->
  <main class="flex-1 min-w-0 lg:ml-64 p-4 sm:p-6 lg:p-8">
    <!-- Mobile top bar: menu button + title -->
    <div class="flex items-center gap-3 mb-4 lg:mb-6 lg:hidden">
      <button type="button" id="admin-sidebar-open" class="p-2 -ml-2 rounded-lg bg-slate-200/80 hover:bg-slate-300 text-slate-700" aria-label="Open menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
      <span class="font-semibold text-slate-800">{% block heading %}Manage{% endblock %}</span>
    </div>
    <div class="max-w-6xl mx-auto">
      {% if messages %}
      <div class="mb-6 space-y-2">
        {% for message in messages %}
        <div class="px-4 py-3 rounded-lg {% if message.tags == 'success' %}bg-emerald-50 text-emerald-800 border border-emerald-200{% elif message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% else %}bg-slate-100 text-slate-800 border border-slate-200{% endif %}">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}
      {% block content %}{% endblock %}
    </div>
  </main>
  <script>
  (function() {
    var sidebar = document.getElementById('admin-sidebar');
    var overlay = document.getElementById('admin-sidebar-overlay');
    var openBtn = document.getElementById('admin-sidebar-open');
    var closeBtn = document.getElementById('admin-sidebar-close');
    function openSidebar() {
      if (sidebar) sidebar.classList.add('open');
      if (overlay) { overlay.classList.remove('pointer-events-none', 'opacity-0'); overlay.classList.add('pointer-events-auto', 'opacity-100'); }
      document.body.style.overflow = 'hidden';
    }
    function closeSidebar() {
      if (sidebar) sidebar.classList.remove('open');
      if (overlay) { overlay.classList.add('pointer-events-none', 'opacity-0'); overlay.classList.remove('pointer-events-auto', 'opacity-100'); }
      document.body.style.overflow = '';
    }
    if (openBtn) openBtn.addEventListener('click', openSidebar);
    if (closeBtn) closeBtn.addEventListener('click', closeSidebar);
    if (overlay) overlay.addEventListener('click', closeSidebar);
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 1024) closeSidebar();
    });
  })();
  </script>
</body>
</html>
