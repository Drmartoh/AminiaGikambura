{% extends 'pages/base.html' %}

{% block title %}Our Projects{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-12">
  <h1 class="text-4xl font-bold text-primary mb-4">Our Projects</h1>
  <p class="text-gray-600 mb-8 max-w-2xl">Discover our initiatives.</p>
  {% if projects %}
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {% for p in projects %}
    <div class="card">
      {% if p.category %}<span class="px-3 py-1 bg-primary/10 text-primary rounded-full text-sm">{{ p.category.name }}</span>{% endif %}
      <h2 class="text-xl font-bold mt-2 mb-2">{{ p.title }}</h2>
      <p class="text-gray-600 line-clamp-3 mb-4">{{ p.description|truncatewords:30 }}</p>
      <a href="{% url 'pages:project_detail' p.slug %}" class="text-primary font-semibold hover:underline">Learn more â†’</a>
    </div>
    {% endfor %}
  </div>
  {% if page_obj.has_other_pages %}
  <div class="mt-8 flex justify-center gap-2">
    {% if page_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}" class="btn-outline py-2 px-4">Previous</a>{% endif %}
    <span class="py-2 px-4 text-gray-600">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}" class="btn-outline py-2 px-4">Next</a>{% endif %}
  </div>
  {% endif %}
  {% else %}
  <div class="card py-12 text-center">
    <p class="text-gray-600">No projects yet.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
